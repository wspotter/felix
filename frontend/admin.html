<!DOCTYPE html>
<html lang="en" data-theme="midnight">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Voice Agent Admin</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%236366f1' rx='15' width='100' height='100'/><path fill='white' d='M50 20c5.5 0 10 4.5 10 10v20c0 5.5-4.5 10-10 10s-10-4.5-10-10V30c0-5.5 4.5-10 10-10zm20 30c0 11-9 20-20 20s-20-9-20-20h6c0 7.7 6.3 14 14 14s14-6.3 14-14h6zm-17 28v12h-6v-12h6z'/></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css?v=19">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
    }
    .admin-shell {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 20px 32px;
      display: grid;
      gap: 16px;
    }
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }
    .admin-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--bg-glass);
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
      font-size: 12px;
    }
    .controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .controls input {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 10px 12px;
      color: var(--text-primary);
      width: 220px;
    }
    .controls button {
      background: var(--accent-primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 14px;
      cursor: pointer;
      font-weight: 600;
    }
    .controls button.secondary {
      background: var(--bg-glass);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow-sm);
    }
    .grid {
      display: grid;
      gap: 12px;
    }
    .grid.two {
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }
    .stat {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-weight: 600;
    }
    .stat .label { color: var(--text-secondary); font-size: 14px; }
    .stat .value { font-size: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px 6px; text-align: left; font-size: 14px; }
    th { color: var(--text-secondary); font-weight: 600; border-bottom: 1px solid var(--border-color); }
    tr:hover td { background: var(--bg-glass); }
    .muted { color: var(--text-secondary); font-size: 13px; }
    .list {
      display: grid;
      gap: 8px;
      max-height: 360px;
      overflow: auto;
    }
    .list-item {
      padding: 10px 12px;
      border-radius: 12px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
    }
    .list-item .meta {
      display: flex;
      gap: 10px;
      font-size: 12px;
      color: var(--text-secondary);
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 12px;
      background: var(--bg-glass);
      border: 1px solid var(--border-color);
      font-size: 13px;
    }
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent-success);
    }
    .danger .status-dot { background: var(--accent-danger); }
    .warning .status-dot { background: var(--accent-warning); }
    .error { color: var(--accent-danger); font-weight: 600; }
    .flex-between { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
    .nowrap { white-space: nowrap; }
  </style>
</head>
<body>
  <main class="admin-shell">
    <header class="admin-header">
      <div class="admin-title">
        <div class="pill">Admin</div>
        <h1 style="margin:0;">Voice Agent Dashboard</h1>
      </div>
      <div class="controls">
        <input id="tokenInput" type="password" placeholder="X-Admin-Token">
        <button id="saveToken">Save Token</button>
        <button id="refresh" class="secondary">Refresh</button>
      </div>
    </header>

    <section class="grid two" id="healthSection">
      <!-- health cards injected here -->
    </section>

    <section class="card">
      <div class="flex-between" style="margin-bottom:10px;">
        <h2 style="margin:0;">Sessions</h2>
        <span class="muted" id="sessionCount">0 active</span>
      </div>
      <div class="table-wrap" style="overflow:auto;">
        <table id="sessionsTable">
          <thead>
            <tr>
              <th>Client</th>
              <th>State</th>
              <th>Last Activity</th>
              <th>History</th>
              <th>Timeout</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="grid two">
      <div class="card">
        <div class="flex-between" style="margin-bottom:10px;">
          <h2 style="margin:0;">Events</h2>
          <span class="muted" id="eventCount">0</span>
        </div>
        <div class="list" id="eventsList"></div>
      </div>
      <div class="card">
        <div class="flex-between" style="margin-bottom:10px;">
          <h2 style="margin:0;">Logs</h2>
          <span class="muted" id="logCount">0</span>
        </div>
        <div class="list" id="logsList"></div>
      </div>
    </section>
  </main>
  <script type="module" src="/static/admin.js"></script>
</body>
</html>
